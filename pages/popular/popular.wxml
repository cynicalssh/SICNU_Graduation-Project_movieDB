<view class="header-bar">
    <view class="city-selector" bindtap="viewCitySelect">
        <text class="city-icon">üìç</text>
        <text class="city-name">{{currentCity || 'ÂÆö‰Ωç‰∏≠'}}</text>
        <text class="city-arrow">‚ñº</text>
    </view>
    <view class="search-bar">
        <input class="search-txt" placeholder-class="search-txt-plc" bindfocus="viewSearch" placeholder="ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØçÊêúÁ¥¢" type="text"/>
    </view>
</view>
<view class="content-wrapper">
<!-- ËΩÆÊí≠ÂõæÔºàÂú®tabÊ†è‰πã‰∏äÔºåÊâÄÊúâtabÈÉΩÊòæÁ§∫Ôºâ -->
<swiper class="banner" indicator-dots="true" autoplay="true" circular="true" interval="3000" duration="500" wx:if="{{bannerList.length > 0}}">
    <block wx:for="{{bannerList}}" wx:for-item="bannerItem" wx:for-index="bannerIndex" wx:key="banner">
        <swiper-item data-type="{{bannerItem.type}}" data-id="{{bannerItem.id}}" bindtap="viewBannerDetail">
            <image src="{{bannerItem.imgUrl}}" class="banner-item" mode="aspectFill" binderror="onBannerImageError"></image>
        </swiper-item>
    </block>
</swiper>
<!-- TabÂØºËà™Ê†è -->
<view class="tab-bar">
    <view class="tab-item {{swiperCurrent === 0 ? 'active' : ''}}" bindtap="switchTab" data-tab="popular" data-index="0">
        ÁÉ≠Êò†‰∏≠
    </view>
    <view class="tab-item {{swiperCurrent === 1 ? 'active' : ''}}" bindtap="switchTab" data-tab="coming" data-index="1">
        ÂæÖ‰∏äÊò†
    </view>
    <view class="tab-item {{swiperCurrent === 2 ? 'active' : ''}}" bindtap="switchTab" data-tab="top" data-index="2">
        Âè£Á¢ë
    </view>
</view>
<!-- SwiperÂÜÖÂÆπÂå∫ÂüüÔºåÊîØÊåÅÂ∑¶Âè≥ÊªëÂä®ÂàáÊç¢ -->
<swiper class="tab-swiper" current="{{swiperCurrent}}" bindchange="onSwiperChange" duration="300">
    <!-- ÁÉ≠Êò†‰∏≠ -->
    <swiper-item>
        <scroll-view class="swiper-content" scroll-y="true" enable-back-to-top="true" show-scrollbar="false" enable-flex="true">
            <import src="../../component/filmList/filmList.wxml"/>
            <template is="filmList" data="{{films: popularFilms, hasMore: popularHasMore, showLoading: popularShowLoading}}"/>
        </scroll-view>
    </swiper-item>
    <!-- ÂæÖ‰∏äÊò† -->
    <swiper-item>
        <scroll-view class="swiper-content" scroll-y="true" enable-back-to-top="true" show-scrollbar="false" enable-flex="true">
            <import src="../../component/filmList/filmList.wxml"/>
            <template is="filmList" data="{{films: comingFilms, hasMore: comingHasMore, showLoading: comingShowLoading}}"/>
        </scroll-view>
    </swiper-item>
    <!-- Âè£Á¢ë -->
    <swiper-item>
        <scroll-view class="swiper-content" scroll-y="true" enable-back-to-top="true" show-scrollbar="false" enable-flex="true">
            <import src="../../component/filmList/filmList.wxml"/>
            <template is="filmList" data="{{films: topFilms, hasMore: topHasMore, showLoading: topShowLoading}}"/>
        </scroll-view>
    </swiper-item>
</swiper>
<import src="../../component/message/message.wxml"/>
<template is="message" data="{{message: message}}"/>
</view>