<view class="container">
    <!-- 顶部用户信息区域 -->
    <view class="user-header" style="{{skin.indexOf('linear-gradient') !== -1 ? 'background: ' + skin : 'background-image: url(' + skin + ')'}}">
        <!-- 顶部操作栏 -->
        <view class="header-top">
            <view class="header-menu" bindtap="viewMenu">
                <text class="menu-icon">☰</text>
            </view>
            <view class="header-title">我的</view>
            <view class="header-actions">
                <text class="action-icon">🎧</text>
                <text class="action-icon">✉️</text>
            </view>
        </view>
        
        <!-- 用户信息卡片 -->
        <view class="user-card">
            <view class="avatar-wrapper" bindtap="onAvatarTap">
                <image src="{{userInfo.avatarUrl || '/resource/logo.png'}}" class="user-avatar" binderror="onAvatarError"></image>
                <view class="avatar-camera">
                    <text class="camera-icon">📷</text>
                </view>
            </view>
            
            <view class="user-name">
                {{userInfo.nickName || '微信用户'}}
                <block wx:if="{{userInfo.gender == 1}}">
                    <view class="user-sex-male"></view>
                </block>
                <block wx:elif="{{userInfo.gender == 2}}">
                    <view class="user-sex-female"></view>
                </block>
            </view>
            
            <view class="user-id-location" wx:if="{{userId}}">
                <text>ID: {{userId}}</text>
                <text wx:if="{{userInfo.city}}" class="location-separator"> / </text>
                <text wx:if="{{userInfo.city}}">IP: {{userInfo.city}}</text>
            </view>
            
            <!-- 个人签名 -->
            <view class="user-signature-wrapper" bindtap="editSignature">
                <view class="signature-content">
                    <text wx:if="{{userSignature && userSignature.length > 0}}" class="signature-text">{{userSignature}}</text>
                    <text wx:else class="signature-placeholder">介绍下自己</text>
                </view>
                <view class="signature-arrow">›</view>
            </view>
            
            <!-- 关于我 -->
            <view class="user-about" bindtap="viewAbout">
                <text class="about-text">关于我</text>
                <text class="about-arrow">›</text>
            </view>
            
            <!-- 关注数（占位，可扩展） -->
            <view class="user-stats">
                <text class="stats-item">关注 0</text>
            </view>
        </view>
    </view>
    
    <!-- 导航标签栏 -->
    <view class="nav-tabs">
        <view class="tab-item {{currentTab === 'home' ? 'active' : ''}}" bindtap="switchTab" data-tab="home">
            <text>主页</text>
        </view>
        <view class="tab-item {{currentTab === 'album' ? 'active' : ''}}" bindtap="switchTab" data-tab="album">
            <text>相册</text>
        </view>
        <view class="tab-search" bindtap="viewSearch">
            <text>🔍</text>
        </view>
    </view>
    
    <!-- 主页内容 -->
    <block wx:if="{{currentTab === 'home'}}">
        <!-- 创建我的书影音TOP10 -->
        <view class="content-section">
            <view class="top10-card" bindtap="createTop10">
                <view class="top10-icon">📊</view>
                <view class="top10-content">
                    <text class="top10-title">创建我的书影音 TOP10</text>
                    <text class="top10-desc">记录你的最爱</text>
                </view>
                <view class="top10-decoration">💕</view>
            </view>
        </view>
        
        <!-- 书影音档案区域 -->
        <view class="content-section">
            <view class="section-header" bindtap="viewArchive">
                <text class="section-title">书影音档案</text>
                <text class="section-arrow">›</text>
            </view>
            
            <!-- 影视 -->
            <view class="archive-subsection">
                <view class="subsection-header" bindtap="viewFilmArchive">
                    <text class="subsection-title">影视</text>
                    <text class="subsection-arrow">›</text>
                </view>
                <view class="archive-items">
                    <view class="archive-item" bindtap="viewWish">
                        <view class="archive-icon">⭐</view>
                        <text class="archive-label">想看</text>
                        <text class="archive-count">{{wishCount}}</text>
                    </view>
                    <view class="archive-item" bindtap="viewWatched">
                        <view class="archive-icon">✓</view>
                        <text class="archive-label">看过</text>
                        <text class="archive-count">{{watchedCount}}</text>
                    </view>
                </view>
            </view>
        </view>
    </block>
    
    <!-- 相册内容 -->
    <block wx:if="{{currentTab === 'album'}}">
        <view class="gallery-section">
            <block wx:if="{{galleryPictures.length === 0}}">
                <view class="empty-tip">
                    <text class="empty-icon">📷</text>
                    <text class="empty-text">还没有照片</text>
                    <text class="empty-desc">点击右上角上传照片</text>
                </view>
            </block>
            <block wx:else>
                <view class="gallery-grid">
                    <block wx:for="{{galleryPictures}}" wx:for-item="picture" wx:for-index="index" wx:key="index">
                        <view class="gallery-item" bindtap="previewGalleryImage" data-index="{{index}}">
                            <image class="gallery-image" src="{{picture}}" mode="aspectFill"></image>
                        </view>
                    </block>
                </view>
            </block>
        </view>
    </block>
</view>