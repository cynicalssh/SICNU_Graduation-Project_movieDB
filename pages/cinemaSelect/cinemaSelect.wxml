<view class="container">
  <!-- ç”µå½±æ ‡é¢˜ -->
  <view class="film-header">
    <text class="film-title">{{filmTitle}}</text>
  </view>

  <!-- é¡¶éƒ¨ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-item city-item" bindtap="selectCity">
      <text class="filter-label">{{currentCity || 'å®šä½ä¸­'}}</text>
      <text class="filter-arrow">â–¼</text>
    </view>
    <view class="filter-divider"></view>
    <view class="filter-item district-item" bindtap="selectDistrict">
      <text class="filter-label">{{currentDistrict || 'å…¨åŸ'}}</text>
      <text class="filter-arrow">â–¼</text>
    </view>
    <view class="filter-divider"></view>
    <view class="filter-item brand-item" bindtap="showBrandFilter">
      <text class="filter-label">{{selectedBrand === 'å…¨éƒ¨' ? 'å“ç‰Œ' : selectedBrand}}</text>
      <text class="filter-arrow">â–¼</text>
    </view>
    <view class="filter-divider"></view>
    <view class="filter-item price-item" bindtap="showPriceFilter">
      <text class="filter-label">{{selectedPriceRange === 'å…¨éƒ¨' ? 'ä»·æ ¼' : selectedPriceRange}}</text>
      <text class="filter-arrow">â–¼</text>
    </view>
    <view class="filter-divider"></view>
    <view class="filter-item sort-item" bindtap="showSortOptions">
      <text class="filter-label">æ’åº</text>
      <text class="filter-arrow">â–¼</text>
    </view>
  </view>

  <!-- å“ç‰Œç­›é€‰ä¸‹æ‹‰ -->
  <view class="filter-dropdown" wx:if="{{showBrandFilter}}">
    <view class="dropdown-item {{selectedBrand === item ? 'active' : ''}}" 
          wx:for="{{brandOptions}}" 
          wx:key="index"
          data-brand="{{item}}"
          bindtap="selectBrand">
      {{item}}
      <text class="check-icon" wx:if="{{selectedBrand === item}}">âœ“</text>
    </view>
  </view>

  <!-- ä»·æ ¼ç­›é€‰ä¸‹æ‹‰ -->
  <view class="filter-dropdown" wx:if="{{showPriceFilter}}">
    <view class="dropdown-item {{selectedPriceRange === item ? 'active' : ''}}" 
          wx:for="{{priceRangeOptions}}" 
          wx:key="index"
          data-range="{{item}}"
          bindtap="selectPriceRange">
      {{item}}
      <text class="check-icon" wx:if="{{selectedPriceRange === item}}">âœ“</text>
    </view>
  </view>

  <!-- æ’åºé€‰é¡¹ä¸‹æ‹‰ -->
  <view class="filter-dropdown" wx:if="{{showSortOptions}}">
    <view class="dropdown-item {{sortType === item.value ? 'active' : ''}}" 
          wx:for="{{sortOptions}}" 
          wx:key="value"
          data-sort="{{item.value}}"
          bindtap="selectSort">
      {{item.label}}
      <text class="check-icon" wx:if="{{sortType === item.value}}">âœ“</text>
    </view>
  </view>

  <!-- å½±é™¢åˆ—è¡¨ -->
  <scroll-view class="cinema-list" scroll-y="true">
    <!-- åŠ è½½ä¸­ -->
    <view class="loading-container" wx:if="{{loading}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-container" wx:if="{{!loading && showEmpty}}">
      <view class="empty-icon">ğŸ¬</view>
      <text class="empty-text">æš‚æ— ç¬¦åˆæ¡ä»¶çš„å½±é™¢</text>
      <text class="empty-hint">è¯•è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶</text>
    </view>

    <!-- å½±é™¢å¡ç‰‡åˆ—è¡¨ -->
    <view class="cinema-item" 
          wx:for="{{filteredCinemaList}}" 
          wx:key="id" 
          data-id="{{item.id}}" 
          data-index="{{index}}" 
          bindtap="selectCinema">
      <view class="cinema-content">
        <view class="cinema-info">
          <view class="cinema-name-row">
            <text class="cinema-name">{{item.name}}</text>
            <view class="cinema-brand-tag" wx:if="{{item.brand && item.brand !== 'default'}}">
              {{item.brand}}
            </view>
          </view>
          <view class="cinema-address-row">
            <text class="cinema-address">{{item.address}}</text>
            <text class="cinema-distance" wx:if="{{item.distance}}">{{item.distance}}</text>
          </view>
          <view class="cinema-actions-row">
            <view class="location-btn" 
                  catchtap="showCinemaMap" 
                  data-id="{{item.id}}"
                  data-name="{{item.name}}"
                  data-address="{{item.address}}"
                  data-latitude="{{item.latitude}}"
                  data-longitude="{{item.longitude}}">
              <text class="location-icon">ğŸ“</text>
              <text class="location-text">ä½ç½®</text>
            </view>
          </view>
          <view class="cinema-rating-row">
            <text class="cinema-rating">è¯„åˆ† {{item.rating}}</text>
          </view>
        </view>
        <view class="cinema-price-wrapper" wx:if="{{item.minPrice}}">
          <view class="cinema-price">
            <text class="price-symbol">Â¥</text>
            <text class="price-value">{{item.minPrice}}</text>
            <text class="price-unit">èµ·</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
</view>
