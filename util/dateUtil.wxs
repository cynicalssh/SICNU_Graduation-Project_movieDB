/**
 * 日期格式化工具
 */

/**
 * 格式化评论日期
 * 将 ISO 8601 格式转换为友好的显示格式
 * 例如: "2023-12-17T10:30:00.000Z" -> "2023-12-17"
 */
function formatReviewDate(dateStr) {
  if (!dateStr) {
    return ''
  }
  
  // 处理 ISO 8601 格式: "2023-12-17T10:30:00.000Z" -> "2023-12-17"
  // WXS 不支持正则字面量，需要使用 getRegExp() 函数
  var reg = getRegExp('^(\\d{4})-(\\d{2})-(\\d{2})')
  var dateMatch = dateStr.match(reg)
  if (dateMatch) {
    return dateMatch[1] + '-' + dateMatch[2] + '-' + dateMatch[3]
  }
  
  // 如果没有匹配到，尝试直接截取前10个字符（YYYY-MM-DD格式）
  if (dateStr.length >= 10) {
    return dateStr.substring(0, 10)
  }
  
  return dateStr
}

module.exports = {
  formatReviewDate: formatReviewDate
}

